language: python
dist: xenial

notifications:
  email: false

python:
  - "2.7"
  - "3.5"
  - "3.6"
  - "3.7"
  - "3.8"

env:
  jobs:
    - ICU_VERSION="65.1"
    - ICU_VERSION="64.2"
    - ICU_VERSION="63.2"
    - ICU_VERSION="62.2"
    - ICU_VERSION="61.2"
    - ICU_VERSION="60.3"
    - ICU_VERSION="59.2"
    - ICU_VERSION="58.3"
    - ICU_VERSION="57.2"
    - ICU_VERSION="56.2"
    - ICU_VERSION="55.2"
    - ICU_VERSION="54.2"
    - ICU_VERSION="53.2"
    - ICU_VERSION="52.2"
    - ICU_VERSION="51.3"
    - ICU_VERSION="50.2"
  # The "global" environment variables are defined for each job.
  global:
    - PYICU_LIBRARIES="icui18n:icuuc:icudata"
    - PYICU_INCLUDES="/tmp/icu4c/include"
    - PYICU_LFLAGS="-L/tmp/icu4c/lib"

cache:
  ccache: true
  pip: true
  timeout: 1000
  directories:
    - /tmp/icu4c

before_install:
  - bash ci-install-icu4c.bash Linux

install:
  - pip install . pytest

script:
  - LD_LIBRARY_PATH="/tmp/icu4c/lib" py.test
